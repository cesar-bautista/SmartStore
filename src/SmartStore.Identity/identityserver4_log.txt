2019-05-20 00:01:43.342 -05:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-05-20 00:01:43.438 -05:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-20 00:01:43.439 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-20 00:01:43.439 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-20 00:01:43.440 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-20 00:01:43.440 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-20 00:01:43.441 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-20 00:01:43.731 -05:00 [DBG] Starting grant removal
2019-05-20 00:01:44.168 -05:00 [DBG] Login Url: /Account/Login
2019-05-20 00:01:44.170 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-20 00:01:44.170 -05:00 [DBG] Logout Url: /Account/Logout
2019-05-20 00:01:44.170 -05:00 [DBG] ConsentUrl Url: /consent
2019-05-20 00:01:44.171 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-20 00:01:44.171 -05:00 [DBG] Error Url: /home/error
2019-05-20 00:01:44.171 -05:00 [DBG] Error Id Parameter: errorId
2019-05-20 00:03:19.363 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 00:03:19.368 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 00:03:19.368 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 00:03:19.373 -05:00 [DBG] Start discovery request
2019-05-20 00:03:20.916 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 00:03:21.270 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 00:03:21.271 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 00:03:21.271 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 00:03:21.277 -05:00 [DBG] Start key discovery request
2019-05-20 00:03:21.424 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-20 00:03:21.430 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-20 00:03:21.430 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-20 00:03:21.437 -05:00 [DBG] Start authorize request
2019-05-20 00:03:21.456 -05:00 [DBG] No user present in authorize request
2019-05-20 00:03:21.465 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:03:23.914 -05:00 [DBG] mvc found in database: true
2019-05-20 00:03:23.930 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:03:24.316 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:03:24.791 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:03:25.339 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:03:25.713 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:03:25.724 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:03:25.744 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YzdlW_ympojvcwsOCQ_V2oHzExZRU2JsHXIvHW194qvbehj5FcZFu7TvPR5uAVgO5hArV9Wo017KEnuddHQv-1KgdpzfM_OGsa9u-dvLph8zNQQlbS0syKDIk6Oc_sNgnbu1xXscmcyyVEY2XYju4_K7ENY3PfHCCdoq4Qso3Q735ZdDu88uknCl9Y5_36VzRxBtQ8xWierEaoon9dBjXyxEV2Xa9WIMP1tq71tM5-icPVljkuK6w39wgydN_9BXow-kpPOZ94fKvh_L_RxE5wzkAG28BXuZc0Eh0znKorlwhTud-HN68Bxe9A4o6NYM4w","UiLocales":null,"Nonce":"636939254013718277.NDJjNTg3MjktNjI5ZC00NjJlLTg0ODctNWZlMmRjNzAzZGJiZGVhYWU2NTMtZDgwOS00ZmExLWJhODctNDI3ZTg4NjM5NGY3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939254013718277.NDJjNTg3MjktNjI5ZC00NjJlLTg0ODctNWZlMmRjNzAzZGJiZGVhYWU2NTMtZDgwOS00ZmExLWJhODctNDI3ZTg4NjM5NGY3","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YzdlW_ympojvcwsOCQ_V2oHzExZRU2JsHXIvHW194qvbehj5FcZFu7TvPR5uAVgO5hArV9Wo017KEnuddHQv-1KgdpzfM_OGsa9u-dvLph8zNQQlbS0syKDIk6Oc_sNgnbu1xXscmcyyVEY2XYju4_K7ENY3PfHCCdoq4Qso3Q735ZdDu88uknCl9Y5_36VzRxBtQ8xWierEaoon9dBjXyxEV2Xa9WIMP1tq71tM5-icPVljkuK6w39wgydN_9BXow-kpPOZ94fKvh_L_RxE5wzkAG28BXuZc0Eh0znKorlwhTud-HN68Bxe9A4o6NYM4w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:03:25.766 -05:00 [INF] Showing login: User is not authenticated
2019-05-20 00:03:26.002 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:03:28.301 -05:00 [DBG] mvc found in database: true
2019-05-20 00:03:28.301 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:03:28.599 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:03:29.019 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:03:29.358 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:03:29.479 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:03:29.480 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:03:31.033 -05:00 [DBG] mvc found in database: true
2019-05-20 00:03:31.033 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:05:03.175 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:05:06.087 -05:00 [DBG] mvc found in database: true
2019-05-20 00:05:06.088 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:05:06.736 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:07.156 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:07.523 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:07.916 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:07.916 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:05:07.952 -05:00 [INF] {"Username":"admin","Provider":null,"ProviderUserId":null,"SubjectId":"818727","DisplayName":"admin","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMSS10DFVO4:00000001","TimeStamp":"2019-05-20T05:05:07.0000000Z","ProcessId":17436,"LocalIpAddress":"127.0.0.1:8878","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-20 00:05:07.976 -05:00 [DBG] Augmenting SignInContext
2019-05-20 00:05:07.980 -05:00 [DBG] Adding idp claim with value: local
2019-05-20 00:05:07.981 -05:00 [DBG] Adding amr claim with value: pwd
2019-05-20 00:05:08.001 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2019-05-20 00:05:10.717 -05:00 [DBG] mvc found in database: true
2019-05-20 00:05:10.718 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:05:10.734 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-20 00:05:10.736 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-20 00:05:10.736 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-20 00:05:10.744 -05:00 [DBG] Start authorize callback request
2019-05-20 00:05:10.749 -05:00 [DBG] User in authorize request: 818727
2019-05-20 00:05:10.750 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:05:13.558 -05:00 [DBG] mvc found in database: true
2019-05-20 00:05:13.558 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:05:13.969 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:14.325 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:14.877 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:15.261 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:15.261 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:05:15.261 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"818727","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YzdlW_ympojvcwsOCQ_V2oHzExZRU2JsHXIvHW194qvbehj5FcZFu7TvPR5uAVgO5hArV9Wo017KEnuddHQv-1KgdpzfM_OGsa9u-dvLph8zNQQlbS0syKDIk6Oc_sNgnbu1xXscmcyyVEY2XYju4_K7ENY3PfHCCdoq4Qso3Q735ZdDu88uknCl9Y5_36VzRxBtQ8xWierEaoon9dBjXyxEV2Xa9WIMP1tq71tM5-icPVljkuK6w39wgydN_9BXow-kpPOZ94fKvh_L_RxE5wzkAG28BXuZc0Eh0znKorlwhTud-HN68Bxe9A4o6NYM4w","UiLocales":null,"Nonce":"636939254013718277.NDJjNTg3MjktNjI5ZC00NjJlLTg0ODctNWZlMmRjNzAzZGJiZGVhYWU2NTMtZDgwOS00ZmExLWJhODctNDI3ZTg4NjM5NGY3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"e13fb739edd5b7b9450c8b47cc3ed03d","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939254013718277.NDJjNTg3MjktNjI5ZC00NjJlLTg0ODctNWZlMmRjNzAzZGJiZGVhYWU2NTMtZDgwOS00ZmExLWJhODctNDI3ZTg4NjM5NGY3","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YzdlW_ympojvcwsOCQ_V2oHzExZRU2JsHXIvHW194qvbehj5FcZFu7TvPR5uAVgO5hArV9Wo017KEnuddHQv-1KgdpzfM_OGsa9u-dvLph8zNQQlbS0syKDIk6Oc_sNgnbu1xXscmcyyVEY2XYju4_K7ENY3PfHCCdoq4Qso3Q735ZdDu88uknCl9Y5_36VzRxBtQ8xWierEaoon9dBjXyxEV2Xa9WIMP1tq71tM5-icPVljkuK6w39wgydN_9BXow-kpPOZ94fKvh_L_RxE5wzkAG28BXuZc0Eh0znKorlwhTud-HN68Bxe9A4o6NYM4w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:05:15.263 -05:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-05-20 00:05:15.448 -05:00 [DBG] K2PVWjRYWLiRC1UYZb+aWBk2ELHdyYeGIZJwFN8UmbA= found in database: false
2019-05-20 00:05:15.449 -05:00 [DBG] user_consent grant with value: mvc|818727 not found in store.
2019-05-20 00:05:15.449 -05:00 [DBG] Found no prior consent from consent store, consent is required
2019-05-20 00:05:15.449 -05:00 [INF] Showing consent: User has not yet consented
2019-05-20 00:05:15.547 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:05:18.027 -05:00 [DBG] mvc found in database: true
2019-05-20 00:05:18.027 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:05:18.683 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:19.071 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:19.425 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:19.824 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:19.825 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:05:21.989 -05:00 [DBG] mvc found in database: true
2019-05-20 00:05:21.989 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:05:22.569 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:22.694 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:45.300 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:05:45.869 -05:00 [DBG] mvc found in database: true
2019-05-20 00:05:45.869 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:05:46.015 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:46.069 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:46.205 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:46.250 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:46.250 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:05:46.252 -05:00 [INF] {"SubjectId":"818727","ClientId":"mvc","RequestedScopes":["openid","profile","roles"],"GrantedScopes":["openid","profile","roles"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLMSS10DFVO4:00000005","TimeStamp":"2019-05-20T05:05:46.0000000Z","ProcessId":17436,"LocalIpAddress":"127.0.0.1:8878","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-05-20 00:05:46.759 -05:00 [DBG] mvc found in database: true
2019-05-20 00:05:46.759 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:05:46.781 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-20 00:05:46.781 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-20 00:05:46.781 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-20 00:05:46.781 -05:00 [DBG] Start authorize callback request
2019-05-20 00:05:46.788 -05:00 [DBG] User in authorize request: 818727
2019-05-20 00:05:46.788 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:05:47.118 -05:00 [DBG] mvc found in database: true
2019-05-20 00:05:47.118 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:05:47.204 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:47.234 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:47.340 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:05:47.371 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:05:47.371 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:05:47.371 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"818727","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YzdlW_ympojvcwsOCQ_V2oHzExZRU2JsHXIvHW194qvbehj5FcZFu7TvPR5uAVgO5hArV9Wo017KEnuddHQv-1KgdpzfM_OGsa9u-dvLph8zNQQlbS0syKDIk6Oc_sNgnbu1xXscmcyyVEY2XYju4_K7ENY3PfHCCdoq4Qso3Q735ZdDu88uknCl9Y5_36VzRxBtQ8xWierEaoon9dBjXyxEV2Xa9WIMP1tq71tM5-icPVljkuK6w39wgydN_9BXow-kpPOZ94fKvh_L_RxE5wzkAG28BXuZc0Eh0znKorlwhTud-HN68Bxe9A4o6NYM4w","UiLocales":null,"Nonce":"636939254013718277.NDJjNTg3MjktNjI5ZC00NjJlLTg0ODctNWZlMmRjNzAzZGJiZGVhYWU2NTMtZDgwOS00ZmExLWJhODctNDI3ZTg4NjM5NGY3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"e13fb739edd5b7b9450c8b47cc3ed03d","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939254013718277.NDJjNTg3MjktNjI5ZC00NjJlLTg0ODctNWZlMmRjNzAzZGJiZGVhYWU2NTMtZDgwOS00ZmExLWJhODctNDI3ZTg4NjM5NGY3","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YzdlW_ympojvcwsOCQ_V2oHzExZRU2JsHXIvHW194qvbehj5FcZFu7TvPR5uAVgO5hArV9Wo017KEnuddHQv-1KgdpzfM_OGsa9u-dvLph8zNQQlbS0syKDIk6Oc_sNgnbu1xXscmcyyVEY2XYju4_K7ENY3PfHCCdoq4Qso3Q735ZdDu88uknCl9Y5_36VzRxBtQ8xWierEaoon9dBjXyxEV2Xa9WIMP1tq71tM5-icPVljkuK6w39wgydN_9BXow-kpPOZ94fKvh_L_RxE5wzkAG28BXuZc0Eh0znKorlwhTud-HN68Bxe9A4o6NYM4w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:05:47.372 -05:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-05-20 00:05:47.406 -05:00 [DBG] K2PVWjRYWLiRC1UYZb+aWBk2ELHdyYeGIZJwFN8UmbA= found in database: false
2019-05-20 00:05:47.406 -05:00 [DBG] user_consent grant with value: mvc|818727 not found in store.
2019-05-20 00:05:47.406 -05:00 [DBG] Found no prior consent from consent store, consent is required
2019-05-20 00:05:47.412 -05:00 [INF] User consented to scopes: ["openid","profile","roles"]
2019-05-20 00:05:47.414 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","roles"]
2019-05-20 00:05:47.418 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 818727
2019-05-20 00:05:47.477 -05:00 [DBG] K2PVWjRYWLiRC1UYZb+aWBk2ELHdyYeGIZJwFN8UmbA= not found in database
2019-05-20 00:05:47.605 -05:00 [DBG] Creating Implicit Flow response.
2019-05-20 00:05:47.619 -05:00 [DBG] Getting claims for identity token for subject: 818727 and client: mvc
2019-05-20 00:05:47.627 -05:00 [DBG] Get profile called for subject 818727 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at","role"] via ClaimsProviderIdentityToken
2019-05-20 00:05:47.630 -05:00 [DBG] Issued claims: ["name","given_name","family_name","website","role"]
2019-05-20 00:05:47.776 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","Endpoint":"Authorize","SubjectId":"818727","Scopes":"openid profile roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****61eA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMSS10DFVO4:00000006","TimeStamp":"2019-05-20T05:05:47.0000000Z","ProcessId":17436,"LocalIpAddress":"127.0.0.1:8878","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-20 00:05:47.780 -05:00 [INF] Authorize endpoint response
{"SubjectId":"818727","ClientId":"mvc","RedirectUri":"https://localhost:44387/signin-oidc","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YzdlW_ympojvcwsOCQ_V2oHzExZRU2JsHXIvHW194qvbehj5FcZFu7TvPR5uAVgO5hArV9Wo017KEnuddHQv-1KgdpzfM_OGsa9u-dvLph8zNQQlbS0syKDIk6Oc_sNgnbu1xXscmcyyVEY2XYju4_K7ENY3PfHCCdoq4Qso3Q735ZdDu88uknCl9Y5_36VzRxBtQ8xWierEaoon9dBjXyxEV2Xa9WIMP1tq71tM5-icPVljkuK6w39wgydN_9BXow-kpPOZ94fKvh_L_RxE5wzkAG28BXuZc0Eh0znKorlwhTud-HN68Bxe9A4o6NYM4w","Scope":"openid profile roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-20 00:05:47.813 -05:00 [DBG] Augmenting SignInContext
2019-05-20 00:05:47.814 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2019-05-20 00:06:53.614 -05:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-05-20 00:06:53.684 -05:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-20 00:06:53.684 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-20 00:06:53.684 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-20 00:06:53.684 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-20 00:06:53.685 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-20 00:06:53.685 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-20 00:06:53.860 -05:00 [DBG] Starting grant removal
2019-05-20 00:06:54.182 -05:00 [DBG] Login Url: /Account/Login
2019-05-20 00:06:54.184 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-20 00:06:54.184 -05:00 [DBG] Logout Url: /Account/Logout
2019-05-20 00:06:54.184 -05:00 [DBG] ConsentUrl Url: /consent
2019-05-20 00:06:54.184 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-20 00:06:54.184 -05:00 [DBG] Error Url: /home/error
2019-05-20 00:06:54.184 -05:00 [DBG] Error Id Parameter: errorId
2019-05-20 00:07:09.833 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 00:07:09.839 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 00:07:09.839 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 00:07:09.846 -05:00 [DBG] Start discovery request
2019-05-20 00:07:11.231 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 00:07:11.608 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 00:07:11.608 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 00:07:11.609 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 00:07:11.615 -05:00 [DBG] Start key discovery request
2019-05-20 00:07:11.748 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-20 00:07:11.753 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-20 00:07:11.753 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-20 00:07:11.762 -05:00 [DBG] Start authorize request
2019-05-20 00:07:11.776 -05:00 [DBG] No user present in authorize request
2019-05-20 00:07:11.782 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:07:12.712 -05:00 [DBG] mvc found in database: true
2019-05-20 00:07:12.731 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:07:12.936 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:07:13.027 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:07:13.130 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:07:13.159 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:07:13.167 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:07:13.180 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YxRDJewED1P7p9JlvTSKFoA13kJMbkj-_5VVMqRDZtNi6AbF7W1TUSRJ_4GtTwWkivXVw3fothuWpAqlbKsupy2U8WtiIu3Nvwa9cKjG8pggx_VufHOZZodALP_MlGs4aa1fRagUjc8nbskQ-ctPEMtxnV-q1JLJLTxf520yyGJISUMdelJM2qMQMJ5GNB-plT6t0pV-rcdGO5RQeAt_4ZJCL5zN7w6bO01JFXBDln_vvEeycoarT1rt0l4G5kaPLyfssDLxxeKC_IlO96g6qyvbhwJ4RluUxBUDKGDxJYw9AnWdx5ZPnPMSphxcOXtXQs","UiLocales":null,"Nonce":"636939256317058425.ZTU2YTU3YmEtZjM2MC00NTQ1LThlYzItNmE0YzkzZTI2NjQxNmY4OTc0MzktNjk3YS00OTJiLWE0NmYtOTIzYzMzNDNlNTRm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939256317058425.ZTU2YTU3YmEtZjM2MC00NTQ1LThlYzItNmE0YzkzZTI2NjQxNmY4OTc0MzktNjk3YS00OTJiLWE0NmYtOTIzYzMzNDNlNTRm","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YxRDJewED1P7p9JlvTSKFoA13kJMbkj-_5VVMqRDZtNi6AbF7W1TUSRJ_4GtTwWkivXVw3fothuWpAqlbKsupy2U8WtiIu3Nvwa9cKjG8pggx_VufHOZZodALP_MlGs4aa1fRagUjc8nbskQ-ctPEMtxnV-q1JLJLTxf520yyGJISUMdelJM2qMQMJ5GNB-plT6t0pV-rcdGO5RQeAt_4ZJCL5zN7w6bO01JFXBDln_vvEeycoarT1rt0l4G5kaPLyfssDLxxeKC_IlO96g6qyvbhwJ4RluUxBUDKGDxJYw9AnWdx5ZPnPMSphxcOXtXQs","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:07:13.197 -05:00 [INF] Showing login: User is not authenticated
2019-05-20 00:07:13.322 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:07:13.966 -05:00 [DBG] mvc found in database: true
2019-05-20 00:07:13.967 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:07:14.166 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:07:14.210 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:07:14.346 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:07:14.390 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:07:14.390 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:07:14.967 -05:00 [DBG] mvc found in database: true
2019-05-20 00:07:14.968 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:07:23.381 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:07:23.878 -05:00 [DBG] mvc found in database: true
2019-05-20 00:07:23.879 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:07:24.044 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:07:24.090 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:07:24.232 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:07:24.278 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:07:24.278 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:07:24.298 -05:00 [INF] {"Username":"admin","Provider":null,"ProviderUserId":null,"SubjectId":"818727","DisplayName":"admin","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMSS3SRKI6E:00000005","TimeStamp":"2019-05-20T05:07:24.0000000Z","ProcessId":8576,"LocalIpAddress":"127.0.0.1:14908","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-20 00:07:24.318 -05:00 [DBG] Augmenting SignInContext
2019-05-20 00:07:24.321 -05:00 [DBG] Adding idp claim with value: local
2019-05-20 00:07:24.322 -05:00 [DBG] Adding amr claim with value: pwd
2019-05-20 00:07:24.338 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2019-05-20 00:07:24.848 -05:00 [DBG] mvc found in database: true
2019-05-20 00:07:24.848 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:07:24.858 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-20 00:07:24.859 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-20 00:07:24.859 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-20 00:07:24.866 -05:00 [DBG] Start authorize callback request
2019-05-20 00:07:24.871 -05:00 [DBG] User in authorize request: 818727
2019-05-20 00:07:24.871 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:07:25.246 -05:00 [DBG] mvc found in database: true
2019-05-20 00:07:25.246 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:07:25.403 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:07:25.452 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:07:25.615 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:07:25.651 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:07:25.651 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:07:25.652 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"818727","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YxRDJewED1P7p9JlvTSKFoA13kJMbkj-_5VVMqRDZtNi6AbF7W1TUSRJ_4GtTwWkivXVw3fothuWpAqlbKsupy2U8WtiIu3Nvwa9cKjG8pggx_VufHOZZodALP_MlGs4aa1fRagUjc8nbskQ-ctPEMtxnV-q1JLJLTxf520yyGJISUMdelJM2qMQMJ5GNB-plT6t0pV-rcdGO5RQeAt_4ZJCL5zN7w6bO01JFXBDln_vvEeycoarT1rt0l4G5kaPLyfssDLxxeKC_IlO96g6qyvbhwJ4RluUxBUDKGDxJYw9AnWdx5ZPnPMSphxcOXtXQs","UiLocales":null,"Nonce":"636939256317058425.ZTU2YTU3YmEtZjM2MC00NTQ1LThlYzItNmE0YzkzZTI2NjQxNmY4OTc0MzktNjk3YS00OTJiLWE0NmYtOTIzYzMzNDNlNTRm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"aa63f1ce3f4854af22badefb76e821a8","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939256317058425.ZTU2YTU3YmEtZjM2MC00NTQ1LThlYzItNmE0YzkzZTI2NjQxNmY4OTc0MzktNjk3YS00OTJiLWE0NmYtOTIzYzMzNDNlNTRm","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YxRDJewED1P7p9JlvTSKFoA13kJMbkj-_5VVMqRDZtNi6AbF7W1TUSRJ_4GtTwWkivXVw3fothuWpAqlbKsupy2U8WtiIu3Nvwa9cKjG8pggx_VufHOZZodALP_MlGs4aa1fRagUjc8nbskQ-ctPEMtxnV-q1JLJLTxf520yyGJISUMdelJM2qMQMJ5GNB-plT6t0pV-rcdGO5RQeAt_4ZJCL5zN7w6bO01JFXBDln_vvEeycoarT1rt0l4G5kaPLyfssDLxxeKC_IlO96g6qyvbhwJ4RluUxBUDKGDxJYw9AnWdx5ZPnPMSphxcOXtXQs","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:07:25.653 -05:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-05-20 00:07:25.759 -05:00 [DBG] K2PVWjRYWLiRC1UYZb+aWBk2ELHdyYeGIZJwFN8UmbA= found in database: true
2019-05-20 00:07:25.771 -05:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-20 00:07:25.782 -05:00 [DBG] Creating Implicit Flow response.
2019-05-20 00:07:25.814 -05:00 [DBG] Getting claims for identity token for subject: 818727 and client: mvc
2019-05-20 00:07:25.830 -05:00 [DBG] Get profile called for subject 818727 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at","role"] via ClaimsProviderIdentityToken
2019-05-20 00:07:25.837 -05:00 [DBG] Issued claims: ["name","given_name","family_name","website","role"]
2019-05-20 00:07:25.932 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","Endpoint":"Authorize","SubjectId":"818727","Scopes":"openid profile roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****jcHA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMSS3SRKI6E:00000006","TimeStamp":"2019-05-20T05:07:25.0000000Z","ProcessId":8576,"LocalIpAddress":"127.0.0.1:14908","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-20 00:07:25.935 -05:00 [INF] Authorize endpoint response
{"SubjectId":"818727","ClientId":"mvc","RedirectUri":"https://localhost:44387/signin-oidc","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YxRDJewED1P7p9JlvTSKFoA13kJMbkj-_5VVMqRDZtNi6AbF7W1TUSRJ_4GtTwWkivXVw3fothuWpAqlbKsupy2U8WtiIu3Nvwa9cKjG8pggx_VufHOZZodALP_MlGs4aa1fRagUjc8nbskQ-ctPEMtxnV-q1JLJLTxf520yyGJISUMdelJM2qMQMJ5GNB-plT6t0pV-rcdGO5RQeAt_4ZJCL5zN7w6bO01JFXBDln_vvEeycoarT1rt0l4G5kaPLyfssDLxxeKC_IlO96g6qyvbhwJ4RluUxBUDKGDxJYw9AnWdx5ZPnPMSphxcOXtXQs","Scope":"openid profile roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-20 00:07:25.954 -05:00 [DBG] Augmenting SignInContext
2019-05-20 00:07:25.954 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2019-05-20 00:08:29.861 -05:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-05-20 00:08:29.937 -05:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-20 00:08:29.938 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-20 00:08:29.938 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-20 00:08:29.938 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-20 00:08:29.939 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-20 00:08:29.939 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-20 00:08:30.139 -05:00 [DBG] Starting grant removal
2019-05-20 00:08:30.507 -05:00 [DBG] Login Url: /Account/Login
2019-05-20 00:08:30.510 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-20 00:08:30.510 -05:00 [DBG] Logout Url: /Account/Logout
2019-05-20 00:08:30.510 -05:00 [DBG] ConsentUrl Url: /consent
2019-05-20 00:08:30.510 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-20 00:08:30.510 -05:00 [DBG] Error Url: /home/error
2019-05-20 00:08:30.510 -05:00 [DBG] Error Id Parameter: errorId
2019-05-20 00:08:53.710 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 00:08:53.718 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 00:08:53.718 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 00:08:53.726 -05:00 [DBG] Start discovery request
2019-05-20 00:08:55.380 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 00:08:55.655 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 00:08:55.655 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 00:08:55.655 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 00:08:55.663 -05:00 [DBG] Start key discovery request
2019-05-20 00:08:55.780 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-20 00:08:55.784 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-20 00:08:55.784 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-20 00:08:55.792 -05:00 [DBG] Start authorize request
2019-05-20 00:08:55.804 -05:00 [DBG] No user present in authorize request
2019-05-20 00:08:55.811 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:08:56.541 -05:00 [DBG] mvc found in database: true
2019-05-20 00:08:56.550 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:08:56.770 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:08:56.904 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:08:57.033 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:08:57.064 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:08:57.072 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:08:57.087 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YwDREOczEd90UUnuTqIfACe5INpAshq7orMdY6QJI4XN859GqUjteXzl6GCTli90R_ROEjj_LWqAKxckzsEtS_yd0wHq68-Q3r9tEQavyqor2I69LcY31Sv4Uydqwk6tpcyQCk5iuYaosJ85usenkrVo3I9TPjp2V_lZfPCo6dYrXrqDuc9p1-AowLLN6neloc78-LNXD17FsaALgbc_mPnM19_4tNRi8lv6E6fEDI5ZhZmA_F8I_Nv7GwrsWSrziQy2tbKkyEDZOYUD2zg4oE9PWojJEEidH1c9gxAArVwgOIH7wfWGJZ-5FKqecVVmrs","UiLocales":null,"Nonce":"636939257357291590.MTQ4MDcyMTctY2Y0MC00MzM0LWI2YzQtYWYwYTY1OTZkZTU5MGE4Yjg1ZWUtZjczMy00N2Q3LTg5NzktNWNjNzU1MzZjMDZj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939257357291590.MTQ4MDcyMTctY2Y0MC00MzM0LWI2YzQtYWYwYTY1OTZkZTU5MGE4Yjg1ZWUtZjczMy00N2Q3LTg5NzktNWNjNzU1MzZjMDZj","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YwDREOczEd90UUnuTqIfACe5INpAshq7orMdY6QJI4XN859GqUjteXzl6GCTli90R_ROEjj_LWqAKxckzsEtS_yd0wHq68-Q3r9tEQavyqor2I69LcY31Sv4Uydqwk6tpcyQCk5iuYaosJ85usenkrVo3I9TPjp2V_lZfPCo6dYrXrqDuc9p1-AowLLN6neloc78-LNXD17FsaALgbc_mPnM19_4tNRi8lv6E6fEDI5ZhZmA_F8I_Nv7GwrsWSrziQy2tbKkyEDZOYUD2zg4oE9PWojJEEidH1c9gxAArVwgOIH7wfWGJZ-5FKqecVVmrs","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:08:57.104 -05:00 [INF] Showing login: User is not authenticated
2019-05-20 00:08:57.208 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:08:57.716 -05:00 [DBG] mvc found in database: true
2019-05-20 00:08:57.716 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:08:57.894 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:08:57.953 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:08:58.092 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:08:58.134 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:08:58.135 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:08:58.661 -05:00 [DBG] mvc found in database: true
2019-05-20 00:08:58.661 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:09:00.722 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:09:01.760 -05:00 [DBG] mvc found in database: true
2019-05-20 00:09:01.760 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:09:01.971 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:09:02.067 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:09:02.316 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:09:02.446 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:09:02.447 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:09:02.475 -05:00 [INF] {"Username":"admin","Provider":null,"ProviderUserId":null,"SubjectId":"818727","DisplayName":"admin","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMSS4PI80DQ:00000006","TimeStamp":"2019-05-20T05:09:02.0000000Z","ProcessId":20096,"LocalIpAddress":"127.0.0.1:41112","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-20 00:09:02.500 -05:00 [DBG] Augmenting SignInContext
2019-05-20 00:09:02.504 -05:00 [DBG] Adding idp claim with value: local
2019-05-20 00:09:02.504 -05:00 [DBG] Adding amr claim with value: pwd
2019-05-20 00:09:02.527 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2019-05-20 00:09:03.577 -05:00 [DBG] mvc found in database: true
2019-05-20 00:09:03.577 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:09:03.592 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-20 00:09:03.593 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-20 00:09:03.593 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-20 00:09:03.604 -05:00 [DBG] Start authorize callback request
2019-05-20 00:09:03.611 -05:00 [DBG] User in authorize request: 818727
2019-05-20 00:09:03.611 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:09:04.347 -05:00 [DBG] mvc found in database: true
2019-05-20 00:09:04.347 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:09:04.511 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:09:04.584 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:09:04.748 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:09:04.826 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:09:04.826 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:09:04.826 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"818727","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YwDREOczEd90UUnuTqIfACe5INpAshq7orMdY6QJI4XN859GqUjteXzl6GCTli90R_ROEjj_LWqAKxckzsEtS_yd0wHq68-Q3r9tEQavyqor2I69LcY31Sv4Uydqwk6tpcyQCk5iuYaosJ85usenkrVo3I9TPjp2V_lZfPCo6dYrXrqDuc9p1-AowLLN6neloc78-LNXD17FsaALgbc_mPnM19_4tNRi8lv6E6fEDI5ZhZmA_F8I_Nv7GwrsWSrziQy2tbKkyEDZOYUD2zg4oE9PWojJEEidH1c9gxAArVwgOIH7wfWGJZ-5FKqecVVmrs","UiLocales":null,"Nonce":"636939257357291590.MTQ4MDcyMTctY2Y0MC00MzM0LWI2YzQtYWYwYTY1OTZkZTU5MGE4Yjg1ZWUtZjczMy00N2Q3LTg5NzktNWNjNzU1MzZjMDZj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"446c74ccd7751d9cd1fe63d8234401a8","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939257357291590.MTQ4MDcyMTctY2Y0MC00MzM0LWI2YzQtYWYwYTY1OTZkZTU5MGE4Yjg1ZWUtZjczMy00N2Q3LTg5NzktNWNjNzU1MzZjMDZj","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YwDREOczEd90UUnuTqIfACe5INpAshq7orMdY6QJI4XN859GqUjteXzl6GCTli90R_ROEjj_LWqAKxckzsEtS_yd0wHq68-Q3r9tEQavyqor2I69LcY31Sv4Uydqwk6tpcyQCk5iuYaosJ85usenkrVo3I9TPjp2V_lZfPCo6dYrXrqDuc9p1-AowLLN6neloc78-LNXD17FsaALgbc_mPnM19_4tNRi8lv6E6fEDI5ZhZmA_F8I_Nv7GwrsWSrziQy2tbKkyEDZOYUD2zg4oE9PWojJEEidH1c9gxAArVwgOIH7wfWGJZ-5FKqecVVmrs","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:09:04.828 -05:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-05-20 00:09:04.992 -05:00 [DBG] K2PVWjRYWLiRC1UYZb+aWBk2ELHdyYeGIZJwFN8UmbA= found in database: true
2019-05-20 00:09:04.999 -05:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-20 00:09:05.007 -05:00 [DBG] Creating Implicit Flow response.
2019-05-20 00:09:05.016 -05:00 [DBG] Getting claims for identity token for subject: 818727 and client: mvc
2019-05-20 00:09:05.022 -05:00 [DBG] Get profile called for subject 818727 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at","role"] via ClaimsProviderIdentityToken
2019-05-20 00:09:05.025 -05:00 [DBG] Issued claims: ["name","given_name","family_name","website","role"]
2019-05-20 00:09:05.179 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","Endpoint":"Authorize","SubjectId":"818727","Scopes":"openid profile roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****tmYQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMSS4PI80DQ:00000007","TimeStamp":"2019-05-20T05:09:05.0000000Z","ProcessId":20096,"LocalIpAddress":"127.0.0.1:41112","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-20 00:09:05.181 -05:00 [INF] Authorize endpoint response
{"SubjectId":"818727","ClientId":"mvc","RedirectUri":"https://localhost:44387/signin-oidc","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YwDREOczEd90UUnuTqIfACe5INpAshq7orMdY6QJI4XN859GqUjteXzl6GCTli90R_ROEjj_LWqAKxckzsEtS_yd0wHq68-Q3r9tEQavyqor2I69LcY31Sv4Uydqwk6tpcyQCk5iuYaosJ85usenkrVo3I9TPjp2V_lZfPCo6dYrXrqDuc9p1-AowLLN6neloc78-LNXD17FsaALgbc_mPnM19_4tNRi8lv6E6fEDI5ZhZmA_F8I_Nv7GwrsWSrziQy2tbKkyEDZOYUD2zg4oE9PWojJEEidH1c9gxAArVwgOIH7wfWGJZ-5FKqecVVmrs","Scope":"openid profile roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-20 00:09:05.212 -05:00 [DBG] Augmenting SignInContext
2019-05-20 00:09:05.213 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2019-05-20 00:10:08.482 -05:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-05-20 00:10:08.553 -05:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-20 00:10:08.553 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-20 00:10:08.554 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-20 00:10:08.554 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-20 00:10:08.554 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-20 00:10:08.554 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-20 00:10:08.770 -05:00 [DBG] Starting grant removal
2019-05-20 00:10:08.956 -05:00 [DBG] Login Url: /Account/Login
2019-05-20 00:10:08.958 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-20 00:10:08.958 -05:00 [DBG] Logout Url: /Account/Logout
2019-05-20 00:10:08.958 -05:00 [DBG] ConsentUrl Url: /consent
2019-05-20 00:10:08.959 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-20 00:10:08.959 -05:00 [DBG] Error Url: /home/error
2019-05-20 00:10:08.959 -05:00 [DBG] Error Id Parameter: errorId
2019-05-20 00:10:23.631 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 00:10:23.640 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 00:10:23.641 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 00:10:23.651 -05:00 [DBG] Start discovery request
2019-05-20 00:10:24.999 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 00:10:25.292 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 00:10:25.293 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 00:10:25.294 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 00:10:25.299 -05:00 [DBG] Start key discovery request
2019-05-20 00:10:25.485 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-20 00:10:25.490 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-20 00:10:25.490 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-20 00:10:25.495 -05:00 [DBG] Start authorize request
2019-05-20 00:10:25.507 -05:00 [DBG] No user present in authorize request
2019-05-20 00:10:25.513 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:10:26.354 -05:00 [DBG] mvc found in database: true
2019-05-20 00:10:26.371 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:10:26.614 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:10:26.740 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:10:26.883 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:10:26.922 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:10:26.930 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:10:26.946 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YxpOwJaD-xoP7qBLpM34PbKNUTYWSVgyXit875qimVaiHPAWLaey_jquchSJVRNh7m-1nQA3fXlOIKBo_0wvRHmYHv_jGyn74zwjnP9s4ZinDcSNQDR6FX1nZmI7eJrq3w877rBB_Ewd4I3A5T-mZpybm0EENNBOBP4PcFuxBmNoXSB5dntIzK8W7LGxmOQadpyghZXE1BL-lPpRyqpgFsnXc2fOvtfs5PKSCH8WsTDoN5c6LAhsUPoeEjlkolcGzDfS7pXLwxe5itZq6kTlajxIa6mbw5VKcKBFF_VDaLbzPcuuS83IbD-SzJ4EOp5N3I","UiLocales":null,"Nonce":"636939258254284088.OTFhYTkzNDMtYzYzNy00Mzc5LWI5NmEtNTBkZjJhOTllNTIwNjY4OWFjNDYtNzMxNi00MDBjLThkMjUtYjJjNjUzMmU5OWUx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939258254284088.OTFhYTkzNDMtYzYzNy00Mzc5LWI5NmEtNTBkZjJhOTllNTIwNjY4OWFjNDYtNzMxNi00MDBjLThkMjUtYjJjNjUzMmU5OWUx","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YxpOwJaD-xoP7qBLpM34PbKNUTYWSVgyXit875qimVaiHPAWLaey_jquchSJVRNh7m-1nQA3fXlOIKBo_0wvRHmYHv_jGyn74zwjnP9s4ZinDcSNQDR6FX1nZmI7eJrq3w877rBB_Ewd4I3A5T-mZpybm0EENNBOBP4PcFuxBmNoXSB5dntIzK8W7LGxmOQadpyghZXE1BL-lPpRyqpgFsnXc2fOvtfs5PKSCH8WsTDoN5c6LAhsUPoeEjlkolcGzDfS7pXLwxe5itZq6kTlajxIa6mbw5VKcKBFF_VDaLbzPcuuS83IbD-SzJ4EOp5N3I","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:10:26.960 -05:00 [INF] Showing login: User is not authenticated
2019-05-20 00:10:27.073 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:10:27.649 -05:00 [DBG] mvc found in database: true
2019-05-20 00:10:27.649 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:10:27.826 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:10:27.895 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:10:28.067 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:10:28.118 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:10:28.118 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:10:28.624 -05:00 [DBG] mvc found in database: true
2019-05-20 00:10:28.624 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:10:30.461 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:10:31.015 -05:00 [DBG] mvc found in database: true
2019-05-20 00:10:31.016 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:10:31.157 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:10:31.212 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:10:31.362 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:10:31.420 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:10:31.421 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:10:31.447 -05:00 [INF] {"Username":"admin","Provider":null,"ProviderUserId":null,"SubjectId":"818727","DisplayName":"admin","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMSS5MT88TD:00000007","TimeStamp":"2019-05-20T05:10:31.0000000Z","ProcessId":7372,"LocalIpAddress":"127.0.0.1:47306","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-20 00:10:31.475 -05:00 [DBG] Augmenting SignInContext
2019-05-20 00:10:31.479 -05:00 [DBG] Adding idp claim with value: local
2019-05-20 00:10:31.479 -05:00 [DBG] Adding amr claim with value: pwd
2019-05-20 00:10:31.496 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2019-05-20 00:10:32.013 -05:00 [DBG] mvc found in database: true
2019-05-20 00:10:32.013 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:10:32.029 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-20 00:10:32.031 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-20 00:10:32.031 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-20 00:10:32.044 -05:00 [DBG] Start authorize callback request
2019-05-20 00:10:32.051 -05:00 [DBG] User in authorize request: 818727
2019-05-20 00:10:32.051 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:10:32.418 -05:00 [DBG] mvc found in database: true
2019-05-20 00:10:32.418 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:10:32.510 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:10:32.544 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:10:32.649 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:10:32.696 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:10:32.696 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:10:32.696 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"818727","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YxpOwJaD-xoP7qBLpM34PbKNUTYWSVgyXit875qimVaiHPAWLaey_jquchSJVRNh7m-1nQA3fXlOIKBo_0wvRHmYHv_jGyn74zwjnP9s4ZinDcSNQDR6FX1nZmI7eJrq3w877rBB_Ewd4I3A5T-mZpybm0EENNBOBP4PcFuxBmNoXSB5dntIzK8W7LGxmOQadpyghZXE1BL-lPpRyqpgFsnXc2fOvtfs5PKSCH8WsTDoN5c6LAhsUPoeEjlkolcGzDfS7pXLwxe5itZq6kTlajxIa6mbw5VKcKBFF_VDaLbzPcuuS83IbD-SzJ4EOp5N3I","UiLocales":null,"Nonce":"636939258254284088.OTFhYTkzNDMtYzYzNy00Mzc5LWI5NmEtNTBkZjJhOTllNTIwNjY4OWFjNDYtNzMxNi00MDBjLThkMjUtYjJjNjUzMmU5OWUx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"854f3e701bb4dad47224fb53ec1282e5","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939258254284088.OTFhYTkzNDMtYzYzNy00Mzc5LWI5NmEtNTBkZjJhOTllNTIwNjY4OWFjNDYtNzMxNi00MDBjLThkMjUtYjJjNjUzMmU5OWUx","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YxpOwJaD-xoP7qBLpM34PbKNUTYWSVgyXit875qimVaiHPAWLaey_jquchSJVRNh7m-1nQA3fXlOIKBo_0wvRHmYHv_jGyn74zwjnP9s4ZinDcSNQDR6FX1nZmI7eJrq3w877rBB_Ewd4I3A5T-mZpybm0EENNBOBP4PcFuxBmNoXSB5dntIzK8W7LGxmOQadpyghZXE1BL-lPpRyqpgFsnXc2fOvtfs5PKSCH8WsTDoN5c6LAhsUPoeEjlkolcGzDfS7pXLwxe5itZq6kTlajxIa6mbw5VKcKBFF_VDaLbzPcuuS83IbD-SzJ4EOp5N3I","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:10:32.700 -05:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-05-20 00:10:32.805 -05:00 [DBG] K2PVWjRYWLiRC1UYZb+aWBk2ELHdyYeGIZJwFN8UmbA= found in database: true
2019-05-20 00:10:32.812 -05:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-05-20 00:10:32.821 -05:00 [DBG] Creating Implicit Flow response.
2019-05-20 00:10:32.831 -05:00 [DBG] Getting claims for identity token for subject: 818727 and client: mvc
2019-05-20 00:10:32.841 -05:00 [DBG] Get profile called for subject 818727 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at","role"] via ClaimsProviderIdentityToken
2019-05-20 00:10:32.845 -05:00 [DBG] Issued claims: ["name","given_name","family_name","website","role"]
2019-05-20 00:10:32.974 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","Endpoint":"Authorize","SubjectId":"818727","Scopes":"openid profile roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ZMPA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMSS5MT88TD:00000008","TimeStamp":"2019-05-20T05:10:32.0000000Z","ProcessId":7372,"LocalIpAddress":"127.0.0.1:47306","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-20 00:10:32.978 -05:00 [INF] Authorize endpoint response
{"SubjectId":"818727","ClientId":"mvc","RedirectUri":"https://localhost:44387/signin-oidc","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YxpOwJaD-xoP7qBLpM34PbKNUTYWSVgyXit875qimVaiHPAWLaey_jquchSJVRNh7m-1nQA3fXlOIKBo_0wvRHmYHv_jGyn74zwjnP9s4ZinDcSNQDR6FX1nZmI7eJrq3w877rBB_Ewd4I3A5T-mZpybm0EENNBOBP4PcFuxBmNoXSB5dntIzK8W7LGxmOQadpyghZXE1BL-lPpRyqpgFsnXc2fOvtfs5PKSCH8WsTDoN5c6LAhsUPoeEjlkolcGzDfS7pXLwxe5itZq6kTlajxIa6mbw5VKcKBFF_VDaLbzPcuuS83IbD-SzJ4EOp5N3I","Scope":"openid profile roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-20 00:10:33.000 -05:00 [DBG] Augmenting SignInContext
2019-05-20 00:10:33.001 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2019-05-20 00:11:59.309 -05:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-05-20 00:11:59.373 -05:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-20 00:11:59.373 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-20 00:11:59.373 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-20 00:11:59.374 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-20 00:11:59.374 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-20 00:11:59.374 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-20 00:11:59.603 -05:00 [DBG] Starting grant removal
2019-05-20 00:11:59.910 -05:00 [DBG] Login Url: /Account/Login
2019-05-20 00:11:59.913 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-20 00:11:59.913 -05:00 [DBG] Logout Url: /Account/Logout
2019-05-20 00:11:59.913 -05:00 [DBG] ConsentUrl Url: /consent
2019-05-20 00:11:59.913 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-20 00:11:59.913 -05:00 [DBG] Error Url: /home/error
2019-05-20 00:11:59.913 -05:00 [DBG] Error Id Parameter: errorId
2019-05-20 00:12:19.916 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 00:12:19.929 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 00:12:19.929 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 00:12:19.936 -05:00 [DBG] Start discovery request
2019-05-20 00:12:20.972 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 00:12:21.337 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 00:12:21.338 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 00:12:21.338 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 00:12:21.343 -05:00 [DBG] Start key discovery request
2019-05-20 00:12:21.490 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-20 00:12:21.495 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-20 00:12:21.495 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-20 00:12:21.503 -05:00 [DBG] Start authorize request
2019-05-20 00:12:21.517 -05:00 [DBG] No user present in authorize request
2019-05-20 00:12:21.527 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:12:22.625 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:22.639 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:22.932 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:23.104 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:23.275 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:23.345 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:23.356 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:12:23.375 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YxE5OIwmuNYbADYiIuQv9hqeZMJOy4yWNBKI_DX_CSc_0SiVJXWLI8YAN-gwdG4EWnxRdqngRk6FW4esCj6dNRvdjsEAFs3x7REQ2a92usK3xmtkOAseQlZvWucduHAtZaOC_qjk9P7cCLjmNvlUpWbesVbCneuzwsmuMmbgFShnAEE4EmnCNHarFfDVc7QPdv3NDcB3nF2iYY_cwjtrNJtYVk1ZbAtXSSQX-87VON8DXUSEoCRMHa5u4Dr-oNpXKZrn2Yz6bRJum_QPYEgNBm2FbNFvfGBNkGDzBxf-wrd2aGjA3r9l9jmfechiYsRMFA","UiLocales":null,"Nonce":"636939259414372092.YzdiMmVmMDItYWVlMy00NjAyLTlkN2YtZmNkOWZkZjFlMjEzNTVjZjZlMzQtOGNhOS00NGRkLTk4MTMtODVlZjczYTc0MDY3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939259414372092.YzdiMmVmMDItYWVlMy00NjAyLTlkN2YtZmNkOWZkZjFlMjEzNTVjZjZlMzQtOGNhOS00NGRkLTk4MTMtODVlZjczYTc0MDY3","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YxE5OIwmuNYbADYiIuQv9hqeZMJOy4yWNBKI_DX_CSc_0SiVJXWLI8YAN-gwdG4EWnxRdqngRk6FW4esCj6dNRvdjsEAFs3x7REQ2a92usK3xmtkOAseQlZvWucduHAtZaOC_qjk9P7cCLjmNvlUpWbesVbCneuzwsmuMmbgFShnAEE4EmnCNHarFfDVc7QPdv3NDcB3nF2iYY_cwjtrNJtYVk1ZbAtXSSQX-87VON8DXUSEoCRMHa5u4Dr-oNpXKZrn2Yz6bRJum_QPYEgNBm2FbNFvfGBNkGDzBxf-wrd2aGjA3r9l9jmfechiYsRMFA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:12:23.394 -05:00 [INF] Showing login: User is not authenticated
2019-05-20 00:12:23.529 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:12:24.560 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:24.560 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:24.752 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:24.829 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:25.080 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:25.217 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:25.218 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:12:26.018 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:26.018 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:28.394 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:12:29.262 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:29.262 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:29.457 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:29.584 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:29.787 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:29.849 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:29.849 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:12:29.877 -05:00 [INF] {"Username":"admin","Provider":null,"ProviderUserId":null,"SubjectId":"818727","DisplayName":"admin","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMSS6NV7RIC:00000005","TimeStamp":"2019-05-20T05:12:29.0000000Z","ProcessId":13704,"LocalIpAddress":"127.0.0.1:29548","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-20 00:12:29.902 -05:00 [DBG] Augmenting SignInContext
2019-05-20 00:12:29.906 -05:00 [DBG] Adding idp claim with value: local
2019-05-20 00:12:29.907 -05:00 [DBG] Adding amr claim with value: pwd
2019-05-20 00:12:29.922 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2019-05-20 00:12:30.768 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:30.768 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:30.799 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-20 00:12:30.800 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-20 00:12:30.800 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-20 00:12:30.810 -05:00 [DBG] Start authorize callback request
2019-05-20 00:12:30.818 -05:00 [DBG] User in authorize request: 818727
2019-05-20 00:12:30.819 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:12:31.559 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:31.559 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:31.673 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:31.755 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:31.889 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:31.972 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:31.973 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:12:31.973 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"818727","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YxE5OIwmuNYbADYiIuQv9hqeZMJOy4yWNBKI_DX_CSc_0SiVJXWLI8YAN-gwdG4EWnxRdqngRk6FW4esCj6dNRvdjsEAFs3x7REQ2a92usK3xmtkOAseQlZvWucduHAtZaOC_qjk9P7cCLjmNvlUpWbesVbCneuzwsmuMmbgFShnAEE4EmnCNHarFfDVc7QPdv3NDcB3nF2iYY_cwjtrNJtYVk1ZbAtXSSQX-87VON8DXUSEoCRMHa5u4Dr-oNpXKZrn2Yz6bRJum_QPYEgNBm2FbNFvfGBNkGDzBxf-wrd2aGjA3r9l9jmfechiYsRMFA","UiLocales":null,"Nonce":"636939259414372092.YzdiMmVmMDItYWVlMy00NjAyLTlkN2YtZmNkOWZkZjFlMjEzNTVjZjZlMzQtOGNhOS00NGRkLTk4MTMtODVlZjczYTc0MDY3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"c0c6b34a60e0f88a7879e6c8359e1730","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939259414372092.YzdiMmVmMDItYWVlMy00NjAyLTlkN2YtZmNkOWZkZjFlMjEzNTVjZjZlMzQtOGNhOS00NGRkLTk4MTMtODVlZjczYTc0MDY3","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YxE5OIwmuNYbADYiIuQv9hqeZMJOy4yWNBKI_DX_CSc_0SiVJXWLI8YAN-gwdG4EWnxRdqngRk6FW4esCj6dNRvdjsEAFs3x7REQ2a92usK3xmtkOAseQlZvWucduHAtZaOC_qjk9P7cCLjmNvlUpWbesVbCneuzwsmuMmbgFShnAEE4EmnCNHarFfDVc7QPdv3NDcB3nF2iYY_cwjtrNJtYVk1ZbAtXSSQX-87VON8DXUSEoCRMHa5u4Dr-oNpXKZrn2Yz6bRJum_QPYEgNBm2FbNFvfGBNkGDzBxf-wrd2aGjA3r9l9jmfechiYsRMFA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:12:31.975 -05:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-05-20 00:12:32.067 -05:00 [DBG] K2PVWjRYWLiRC1UYZb+aWBk2ELHdyYeGIZJwFN8UmbA= found in database: false
2019-05-20 00:12:32.068 -05:00 [DBG] user_consent grant with value: mvc|818727 not found in store.
2019-05-20 00:12:32.068 -05:00 [DBG] Found no prior consent from consent store, consent is required
2019-05-20 00:12:32.068 -05:00 [INF] Showing consent: User has not yet consented
2019-05-20 00:12:32.165 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:12:33.083 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:33.083 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:33.305 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:33.410 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:33.611 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:33.763 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:33.763 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:12:34.653 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:34.653 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:34.842 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:34.938 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:42.378 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:12:43.379 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:43.379 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:43.612 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:43.711 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:43.931 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:44.050 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:44.050 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:12:44.052 -05:00 [INF] {"SubjectId":"818727","ClientId":"mvc","RequestedScopes":["openid","profile","roles"],"GrantedScopes":["openid","profile","roles"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLMSS6NV7RID:00000001","TimeStamp":"2019-05-20T05:12:44.0000000Z","ProcessId":13704,"LocalIpAddress":"127.0.0.1:29548","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-05-20 00:12:44.981 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:44.981 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:45.031 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-05-20 00:12:45.032 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-05-20 00:12:45.032 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-05-20 00:12:45.033 -05:00 [DBG] Start authorize callback request
2019-05-20 00:12:45.044 -05:00 [DBG] User in authorize request: 818727
2019-05-20 00:12:45.044 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:12:46.070 -05:00 [DBG] mvc found in database: true
2019-05-20 00:12:46.070 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:12:46.213 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:46.288 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:46.444 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:12:46.525 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:12:46.525 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:12:46.525 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"818727","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YxE5OIwmuNYbADYiIuQv9hqeZMJOy4yWNBKI_DX_CSc_0SiVJXWLI8YAN-gwdG4EWnxRdqngRk6FW4esCj6dNRvdjsEAFs3x7REQ2a92usK3xmtkOAseQlZvWucduHAtZaOC_qjk9P7cCLjmNvlUpWbesVbCneuzwsmuMmbgFShnAEE4EmnCNHarFfDVc7QPdv3NDcB3nF2iYY_cwjtrNJtYVk1ZbAtXSSQX-87VON8DXUSEoCRMHa5u4Dr-oNpXKZrn2Yz6bRJum_QPYEgNBm2FbNFvfGBNkGDzBxf-wrd2aGjA3r9l9jmfechiYsRMFA","UiLocales":null,"Nonce":"636939259414372092.YzdiMmVmMDItYWVlMy00NjAyLTlkN2YtZmNkOWZkZjFlMjEzNTVjZjZlMzQtOGNhOS00NGRkLTk4MTMtODVlZjczYTc0MDY3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"c0c6b34a60e0f88a7879e6c8359e1730","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939259414372092.YzdiMmVmMDItYWVlMy00NjAyLTlkN2YtZmNkOWZkZjFlMjEzNTVjZjZlMzQtOGNhOS00NGRkLTk4MTMtODVlZjczYTc0MDY3","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YxE5OIwmuNYbADYiIuQv9hqeZMJOy4yWNBKI_DX_CSc_0SiVJXWLI8YAN-gwdG4EWnxRdqngRk6FW4esCj6dNRvdjsEAFs3x7REQ2a92usK3xmtkOAseQlZvWucduHAtZaOC_qjk9P7cCLjmNvlUpWbesVbCneuzwsmuMmbgFShnAEE4EmnCNHarFfDVc7QPdv3NDcB3nF2iYY_cwjtrNJtYVk1ZbAtXSSQX-87VON8DXUSEoCRMHa5u4Dr-oNpXKZrn2Yz6bRJum_QPYEgNBm2FbNFvfGBNkGDzBxf-wrd2aGjA3r9l9jmfechiYsRMFA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:12:46.525 -05:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-05-20 00:12:46.587 -05:00 [DBG] K2PVWjRYWLiRC1UYZb+aWBk2ELHdyYeGIZJwFN8UmbA= found in database: false
2019-05-20 00:12:46.587 -05:00 [DBG] user_consent grant with value: mvc|818727 not found in store.
2019-05-20 00:12:46.587 -05:00 [DBG] Found no prior consent from consent store, consent is required
2019-05-20 00:12:46.593 -05:00 [INF] User consented to scopes: ["openid","profile","roles"]
2019-05-20 00:12:46.594 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","roles"]
2019-05-20 00:12:46.599 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 818727
2019-05-20 00:12:46.679 -05:00 [DBG] K2PVWjRYWLiRC1UYZb+aWBk2ELHdyYeGIZJwFN8UmbA= not found in database
2019-05-20 00:12:46.853 -05:00 [DBG] Creating Implicit Flow response.
2019-05-20 00:12:46.870 -05:00 [DBG] Getting claims for identity token for subject: 818727 and client: mvc
2019-05-20 00:12:46.879 -05:00 [DBG] Get profile called for subject 818727 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at","role"] via ClaimsProviderIdentityToken
2019-05-20 00:12:46.883 -05:00 [DBG] Issued claims: ["name","given_name","family_name","website","role"]
2019-05-20 00:12:47.027 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","Endpoint":"Authorize","SubjectId":"818727","Scopes":"openid profile roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****-Xyw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMSS6NV7RID:00000002","TimeStamp":"2019-05-20T05:12:47.0000000Z","ProcessId":13704,"LocalIpAddress":"127.0.0.1:29548","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-20 00:12:47.030 -05:00 [INF] Authorize endpoint response
{"SubjectId":"818727","ClientId":"mvc","RedirectUri":"https://localhost:44387/signin-oidc","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YxE5OIwmuNYbADYiIuQv9hqeZMJOy4yWNBKI_DX_CSc_0SiVJXWLI8YAN-gwdG4EWnxRdqngRk6FW4esCj6dNRvdjsEAFs3x7REQ2a92usK3xmtkOAseQlZvWucduHAtZaOC_qjk9P7cCLjmNvlUpWbesVbCneuzwsmuMmbgFShnAEE4EmnCNHarFfDVc7QPdv3NDcB3nF2iYY_cwjtrNJtYVk1ZbAtXSSQX-87VON8DXUSEoCRMHa5u4Dr-oNpXKZrn2Yz6bRJum_QPYEgNBm2FbNFvfGBNkGDzBxf-wrd2aGjA3r9l9jmfechiYsRMFA","Scope":"openid profile roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-05-20 00:12:47.060 -05:00 [DBG] Augmenting SignInContext
2019-05-20 00:12:47.061 -05:00 [INF] AuthenticationScheme: idsrv signed in.
2019-05-20 00:17:00.655 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 00:17:00.713 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 00:17:00.714 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 00:17:00.715 -05:00 [DBG] Start discovery request
2019-05-20 00:17:02.138 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 00:17:02.566 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 00:17:02.566 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 00:17:02.567 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 00:17:02.567 -05:00 [DBG] Start key discovery request
2019-05-20 00:17:02.783 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-05-20 00:17:02.802 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-05-20 00:17:02.802 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-05-20 00:17:02.839 -05:00 [DBG] Processing signout request for 818727
2019-05-20 00:17:02.850 -05:00 [DBG] Start end session request validation
2019-05-20 00:17:02.863 -05:00 [DBG] Start identity token validation
2019-05-20 00:17:09.424 -05:00 [DBG] mvc found in database: true
2019-05-20 00:17:09.424 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:17:09.425 -05:00 [DBG] Client found: mvc / MVC Client
2019-05-20 00:17:09.468 -05:00 [DBG] IsActive called from: IdentityTokenValidation
2019-05-20 00:17:09.468 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-05-20 00:17:09.473 -05:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1558329166,"exp":1558329466,"iss":"https://localhost:44372","aud":"mvc","nonce":"636939259414372092.YzdiMmVmMDItYWVlMy00NjAyLTlkN2YtZmNkOWZkZjFlMjEzNTVjZjZlMzQtOGNhOS00NGRkLTk4MTMtODVlZjczYTc0MDY3","iat":1558329166,"sid":"c0c6b34a60e0f88a7879e6c8359e1730","sub":"818727","auth_time":1558329149,"idp":"local","name":"Alice Smith","given_name":"Alice","family_name":"Smith","website":"http://alice.com","role":"admin","amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-20 00:17:09.482 -05:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"818727","PostLogOutUri":"https://localhost:44387/signout-callback-oidc","State":"CfDJ8DcCqcj3oZFGj3j75jjX4Yy490jrmZPuCrKpPcjYDpiXrO8P_MLl02JrMJjyY9fzCEH6i4ahLQt30DhbD_KbF3HayRnwL-Oa0PGE5Et0xNCjP7JMxuKaCJQJGYnSzqXoH66vmEDilFdWlvsJK0zDNdIXDycKPhRENaTCEjnxm7Y8","Raw":{"post_logout_redirect_uri":"https://localhost:44387/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8DcCqcj3oZFGj3j75jjX4Yy490jrmZPuCrKpPcjYDpiXrO8P_MLl02JrMJjyY9fzCEH6i4ahLQt30DhbD_KbF3HayRnwL-Oa0PGE5Et0xNCjP7JMxuKaCJQJGYnSzqXoH66vmEDilFdWlvsJK0zDNdIXDycKPhRENaTCEjnxm7Y8","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-05-20 00:17:09.482 -05:00 [DBG] Success validating end session request from mvc
2019-05-20 00:17:09.812 -05:00 [INF] AuthenticationScheme: idsrv signed out.
2019-05-20 00:17:09.814 -05:00 [INF] {"SubjectId":"818727","DisplayName":"admin","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLMSS6NV7RIE:00000004","TimeStamp":"2019-05-20T05:17:09.0000000Z","ProcessId":13704,"LocalIpAddress":"127.0.0.1:29548","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-05-20 00:17:09.961 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-05-20 00:17:10.051 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-05-20 00:17:10.051 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-05-20 00:17:10.065 -05:00 [DBG] Processing signout callback request
2019-05-20 00:17:21.500 -05:00 [DBG] mvc found in database: true
2019-05-20 00:17:21.500 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:17:21.500 -05:00 [DBG] Client front-channel logout URLs: https://localhost:44387/signout-oidc?sid=c0c6b34a60e0f88a7879e6c8359e1730&iss=https%3A%2F%2Flocalhost%3A44372
2019-05-20 00:17:21.501 -05:00 [DBG] No client back-channel logout URLs
2019-05-20 00:17:21.501 -05:00 [INF] Successful signout callback.
2019-05-20 00:17:21.501 -05:00 [DBG] Client front-channel iframe urls: ["https://localhost:44387/signout-oidc?sid=c0c6b34a60e0f88a7879e6c8359e1730&iss=https%3A%2F%2Flocalhost%3A44372"]
2019-05-20 00:17:21.501 -05:00 [DBG] No client back-channel iframe urls
2019-05-20 00:23:25.193 -05:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-05-20 00:23:25.293 -05:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-20 00:23:25.293 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-20 00:23:25.294 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-20 00:23:25.294 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-20 00:23:25.294 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-20 00:23:25.294 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-20 00:23:25.595 -05:00 [DBG] Starting grant removal
2019-05-20 00:23:25.891 -05:00 [DBG] Login Url: /Account/Login
2019-05-20 00:23:25.894 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-20 00:23:25.894 -05:00 [DBG] Logout Url: /Account/Logout
2019-05-20 00:23:25.894 -05:00 [DBG] ConsentUrl Url: /consent
2019-05-20 00:23:25.894 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-20 00:23:25.894 -05:00 [DBG] Error Url: /home/error
2019-05-20 00:23:25.894 -05:00 [DBG] Error Id Parameter: errorId
2019-05-20 00:23:53.505 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 00:23:53.510 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 00:23:53.511 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 00:23:53.518 -05:00 [DBG] Start discovery request
2019-05-20 00:24:00.257 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 00:24:00.586 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 00:24:00.587 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 00:24:00.587 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 00:24:00.592 -05:00 [DBG] Start key discovery request
2019-05-20 00:24:00.728 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-20 00:24:00.733 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-20 00:24:00.734 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-20 00:24:00.741 -05:00 [DBG] Start authorize request
2019-05-20 00:24:00.758 -05:00 [DBG] No user present in authorize request
2019-05-20 00:24:00.767 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:24:07.124 -05:00 [DBG] mvc found in database: true
2019-05-20 00:24:07.139 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:24:08.195 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:24:08.927 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:24:09.847 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:24:10.322 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:24:10.377 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:24:10.409 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YzIADmF_ujCSfSLdRefDpwMc_xZGPY0sow0k9nvghMAwFw8pZXGhH4naccSqn-vwaNe6tyWRwiATXx_0hC1kVoVZfCfYqi8gjpolyHFuxZmsDEeO_MFFkhGcx7DVwPY5sYoyXMCbYjGb_Kn-uo4DVms-RZVYr9kFrc6yJm6-nrFS6TU8peedfgw0GRuAL9S3_qXsDMsMJcMfwZKz93DoubMKKqSaPbWMDz39oHgqNA7_zyBB-F8wZyA3Eljpms9O05j5Q6WPwv6lzexBj6L8gapQT4EsN1iRKT4VDdYrhjt4ZPUOGeZullnJXUFgmr_Z2o","UiLocales":null,"Nonce":"636939266406739735.MWFkNTMzNTYtNjgyNi00M2Q2LWE1OTEtYmFkYTEzZjQxODU4NTM3ODczODAtY2Q4NC00MzliLWJhMmYtNDM0OWI0OWFlNWNj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939266406739735.MWFkNTMzNTYtNjgyNi00M2Q2LWE1OTEtYmFkYTEzZjQxODU4NTM3ODczODAtY2Q4NC00MzliLWJhMmYtNDM0OWI0OWFlNWNj","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YzIADmF_ujCSfSLdRefDpwMc_xZGPY0sow0k9nvghMAwFw8pZXGhH4naccSqn-vwaNe6tyWRwiATXx_0hC1kVoVZfCfYqi8gjpolyHFuxZmsDEeO_MFFkhGcx7DVwPY5sYoyXMCbYjGb_Kn-uo4DVms-RZVYr9kFrc6yJm6-nrFS6TU8peedfgw0GRuAL9S3_qXsDMsMJcMfwZKz93DoubMKKqSaPbWMDz39oHgqNA7_zyBB-F8wZyA3Eljpms9O05j5Q6WPwv6lzexBj6L8gapQT4EsN1iRKT4VDdYrhjt4ZPUOGeZullnJXUFgmr_Z2o","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 00:24:10.431 -05:00 [INF] Showing login: User is not authenticated
2019-05-20 00:24:10.584 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 00:24:14.340 -05:00 [DBG] mvc found in database: true
2019-05-20 00:24:14.340 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:24:15.367 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:24:15.508 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:24:15.998 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 00:24:16.694 -05:00 [DBG] Found [] API scopes in database
2019-05-20 00:24:16.694 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 00:24:19.470 -05:00 [DBG] mvc found in database: true
2019-05-20 00:24:19.470 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 00:28:14.602 -05:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-05-20 00:28:14.763 -05:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-20 00:28:14.764 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-20 00:28:14.764 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-20 00:28:14.764 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-20 00:28:14.764 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-20 00:28:14.764 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-20 00:28:15.529 -05:00 [DBG] Starting grant removal
2019-05-20 00:28:15.984 -05:00 [DBG] Login Url: /Account/Login
2019-05-20 00:28:15.988 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-20 00:28:15.988 -05:00 [DBG] Logout Url: /Account/Logout
2019-05-20 00:28:15.988 -05:00 [DBG] ConsentUrl Url: /consent
2019-05-20 00:28:15.989 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-20 00:28:15.989 -05:00 [DBG] Error Url: /home/error
2019-05-20 00:28:15.989 -05:00 [DBG] Error Id Parameter: errorId
2019-05-20 00:42:20.290 -05:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-05-20 00:42:20.389 -05:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-20 00:42:20.389 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-20 00:42:20.389 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-20 00:42:20.389 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-20 00:42:20.389 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-20 00:42:20.389 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-20 00:42:20.666 -05:00 [DBG] Starting grant removal
2019-05-20 00:42:20.951 -05:00 [DBG] Login Url: /Account/Login
2019-05-20 00:42:20.954 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-20 00:42:20.954 -05:00 [DBG] Logout Url: /Account/Logout
2019-05-20 00:42:20.954 -05:00 [DBG] ConsentUrl Url: /consent
2019-05-20 00:42:20.954 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-20 00:42:20.954 -05:00 [DBG] Error Url: /home/error
2019-05-20 00:42:20.954 -05:00 [DBG] Error Id Parameter: errorId
2019-05-20 00:43:50.890 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 00:43:50.897 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 00:43:50.897 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 00:43:50.904 -05:00 [DBG] Start discovery request
2019-05-20 00:43:56.277 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 00:43:56.596 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 00:43:56.598 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 00:43:56.598 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 00:43:56.604 -05:00 [DBG] Start key discovery request
2019-05-20 00:44:07.153 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-20 00:44:07.168 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-20 00:44:07.168 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-20 00:44:07.183 -05:00 [DBG] Start token request.
2019-05-20 00:44:07.200 -05:00 [DBG] Start client validation
2019-05-20 00:44:07.209 -05:00 [DBG] Start parsing Basic Authentication secret
2019-05-20 00:44:07.210 -05:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-05-20 00:44:07.210 -05:00 [DBG] Secret id found: client
2019-05-20 00:44:15.107 -05:00 [DBG] client found in database: true
2019-05-20 00:44:15.118 -05:00 [DBG] client configuration validation for client client succeeded.
2019-05-20 00:44:15.137 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-20 00:44:15.137 -05:00 [DBG] Client validation success
2019-05-20 00:44:15.792 -05:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLMSSNMLMAQU:00000003","TimeStamp":"2019-05-20T05:44:15.0000000Z","ProcessId":17632,"LocalIpAddress":"127.0.0.1:43264","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-20 00:44:15.849 -05:00 [DBG] Start token request validation
2019-05-20 00:44:15.869 -05:00 [DBG] Start resource owner password token request validation
2019-05-20 00:44:16.898 -05:00 [DBG] Found [] identity scopes in database
2019-05-20 00:44:19.522 -05:00 [DBG] Found ["api1"] API scopes in database
2019-05-20 00:44:20.496 -05:00 [DBG] Found [] identity scopes in database
2019-05-20 00:44:21.122 -05:00 [DBG] Found ["api1"] API scopes in database
2019-05-20 00:44:21.133 -05:00 [DBG] IsActive called from: ResourceOwnerValidation
2019-05-20 00:44:21.135 -05:00 [INF] {"Username":"admin","Provider":null,"ProviderUserId":null,"SubjectId":"818727","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMSSNMLMAQU:00000003","TimeStamp":"2019-05-20T05:44:21.0000000Z","ProcessId":17632,"LocalIpAddress":"127.0.0.1:43264","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-20 00:44:21.136 -05:00 [DBG] Resource owner password token request validation success.
2019-05-20 00:44:21.146 -05:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"admin","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"admin","password":"***REDACTED***","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-05-20 00:44:21.197 -05:00 [DBG] Getting claims for access token for client: client
2019-05-20 00:44:21.198 -05:00 [DBG] Getting claims for access token for subject: 818727
2019-05-20 00:44:21.208 -05:00 [DBG] Get profile called for subject 818727 from client Client Credentials Client with claim types [] via ClaimsProviderAccessToken
2019-05-20 00:44:21.210 -05:00 [DBG] Issued claims: []
2019-05-20 00:44:21.416 -05:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"818727","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****1XUA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMSSNMLMAQU:00000003","TimeStamp":"2019-05-20T05:44:21.0000000Z","ProcessId":17632,"LocalIpAddress":"127.0.0.1:43264","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-20 00:44:21.418 -05:00 [DBG] Token request success.
2019-05-20 00:44:30.325 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 00:44:30.326 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 00:44:30.326 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 00:44:30.326 -05:00 [DBG] Start discovery request
2019-05-20 00:44:34.999 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 00:44:35.323 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 00:44:35.323 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 00:44:35.323 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 00:44:35.323 -05:00 [DBG] Start key discovery request
2019-05-20 00:45:10.053 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 00:45:10.053 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 00:45:10.053 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 00:45:10.053 -05:00 [DBG] Start discovery request
2019-05-20 00:45:13.691 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 00:45:13.901 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 00:45:13.902 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 00:45:13.902 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 00:45:13.902 -05:00 [DBG] Start key discovery request
2019-05-20 00:45:17.234 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-20 00:45:17.235 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-20 00:45:17.236 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-20 00:45:17.236 -05:00 [DBG] Start token request.
2019-05-20 00:45:17.236 -05:00 [DBG] Start client validation
2019-05-20 00:45:17.236 -05:00 [DBG] Start parsing Basic Authentication secret
2019-05-20 00:45:17.237 -05:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-05-20 00:45:17.237 -05:00 [DBG] Secret id found: client
2019-05-20 00:45:19.824 -05:00 [DBG] client found in database: true
2019-05-20 00:45:19.824 -05:00 [DBG] client configuration validation for client client succeeded.
2019-05-20 00:45:19.824 -05:00 [DBG] No matching hashed secret found.
2019-05-20 00:45:19.824 -05:00 [DBG] Secret validators could not validate secret
2019-05-20 00:45:19.825 -05:00 [INF] {"ClientId":"client","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"Invalid client secret","ActivityId":"0HLMSSNMLMAQU:00000008","TimeStamp":"2019-05-20T05:45:19.0000000Z","ProcessId":17632,"LocalIpAddress":"127.0.0.1:43264","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-05-20 00:45:19.825 -05:00 [ERR] Client secret validation failed for client: client.
2019-05-20 01:16:17.089 -05:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-05-20 01:16:17.169 -05:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-05-20 01:16:17.169 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-05-20 01:16:17.169 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-05-20 01:16:17.169 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-05-20 01:16:17.169 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-05-20 01:16:17.169 -05:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-05-20 01:16:17.561 -05:00 [DBG] Starting grant removal
2019-05-20 01:16:18.080 -05:00 [DBG] Login Url: /Account/Login
2019-05-20 01:16:18.084 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-20 01:16:18.084 -05:00 [DBG] Logout Url: /Account/Logout
2019-05-20 01:16:18.085 -05:00 [DBG] ConsentUrl Url: /consent
2019-05-20 01:16:18.085 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-20 01:16:18.085 -05:00 [DBG] Error Url: /home/error
2019-05-20 01:16:18.085 -05:00 [DBG] Error Id Parameter: errorId
2019-05-20 01:17:53.700 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 01:17:53.707 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 01:17:53.708 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 01:17:53.715 -05:00 [DBG] Start discovery request
2019-05-20 01:17:56.732 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 01:17:56.925 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 01:17:56.925 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 01:17:56.926 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 01:17:56.932 -05:00 [DBG] Start key discovery request
2019-05-20 01:17:57.064 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-05-20 01:17:57.068 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-05-20 01:17:57.069 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-05-20 01:17:57.077 -05:00 [DBG] Start authorize request
2019-05-20 01:17:57.094 -05:00 [DBG] No user present in authorize request
2019-05-20 01:17:57.108 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 01:17:58.719 -05:00 [DBG] mvc found in database: true
2019-05-20 01:17:58.734 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 01:17:59.184 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 01:17:59.527 -05:00 [DBG] Found [] API scopes in database
2019-05-20 01:17:59.873 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 01:18:00.192 -05:00 [DBG] Found [] API scopes in database
2019-05-20 01:18:00.229 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 01:18:00.253 -05:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44387/signin-oidc","AllowedRedirectUris":["https://localhost:44387/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile roles","State":"CfDJ8DcCqcj3oZFGj3j75jjX4YwGxz-N42T6sIOXSjdJrTtAdV2-F7dRY5PkqGXdgNr-gdS_BIwOuUZlFo7Tpui7D8RBLB4Kowb2iH-ZffKIaB2DwLqQgGRPDUZdUFrZiDG_sG5Lj_HcHFTHoR0WjmvrPqtdEFbT8SlB9jV7PkJ-lCEe9rPi-KxCFjrm68k-7zo1zG-wMsDMDGE_3xjIqz8yx1eTk3-5nvlLarpxH0FWSfcICbfJ9EJAiZDvxw2nBv4b9WaWPnOVm09cAeoyWdEUR22mcICUrddsXDOzaQ1xNYZbB-gBpKiPubHi3s2Epecno7eLS4F3KFS-iX45q-YbuXs","UiLocales":null,"Nonce":"636939298770069033.NTIyMWZiZjgtNDk4MC00MDk0LWE1MTItMjQ5ZmU0MDVmYjg0OWM4ZDZiZDgtMDEyMi00YjcxLWIzYWYtOWMyODRmZTE1ZTM0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44387/signin-oidc","response_type":"id_token","scope":"openid profile roles","response_mode":"form_post","nonce":"636939298770069033.NTIyMWZiZjgtNDk4MC00MDk0LWE1MTItMjQ5ZmU0MDVmYjg0OWM4ZDZiZDgtMDEyMi00YjcxLWIzYWYtOWMyODRmZTE1ZTM0","state":"CfDJ8DcCqcj3oZFGj3j75jjX4YwGxz-N42T6sIOXSjdJrTtAdV2-F7dRY5PkqGXdgNr-gdS_BIwOuUZlFo7Tpui7D8RBLB4Kowb2iH-ZffKIaB2DwLqQgGRPDUZdUFrZiDG_sG5Lj_HcHFTHoR0WjmvrPqtdEFbT8SlB9jV7PkJ-lCEe9rPi-KxCFjrm68k-7zo1zG-wMsDMDGE_3xjIqz8yx1eTk3-5nvlLarpxH0FWSfcICbfJ9EJAiZDvxw2nBv4b9WaWPnOVm09cAeoyWdEUR22mcICUrddsXDOzaQ1xNYZbB-gBpKiPubHi3s2Epecno7eLS4F3KFS-iX45q-YbuXs","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-05-20 01:18:00.267 -05:00 [INF] Showing login: User is not authenticated
2019-05-20 01:18:00.392 -05:00 [DBG] Start authorize request protocol validation
2019-05-20 01:18:01.485 -05:00 [DBG] mvc found in database: true
2019-05-20 01:18:01.485 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 01:18:01.675 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 01:18:01.781 -05:00 [DBG] Found [] API scopes in database
2019-05-20 01:18:02.022 -05:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-05-20 01:18:02.140 -05:00 [DBG] Found [] API scopes in database
2019-05-20 01:18:02.140 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-05-20 01:18:03.155 -05:00 [DBG] mvc found in database: true
2019-05-20 01:18:03.156 -05:00 [DBG] client configuration validation for client mvc succeeded.
2019-05-20 01:19:16.753 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 01:19:16.753 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 01:19:16.753 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 01:19:16.754 -05:00 [DBG] Start discovery request
2019-05-20 01:19:17.252 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 01:19:17.374 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 01:19:17.383 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 01:19:17.383 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 01:19:17.383 -05:00 [DBG] Start key discovery request
2019-05-20 01:19:17.757 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-20 01:19:17.764 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-20 01:19:17.764 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-20 01:19:17.777 -05:00 [DBG] Start token request.
2019-05-20 01:19:17.787 -05:00 [DBG] Start client validation
2019-05-20 01:19:17.796 -05:00 [DBG] Start parsing Basic Authentication secret
2019-05-20 01:19:17.796 -05:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-05-20 01:19:17.796 -05:00 [DBG] Secret id found: client
2019-05-20 01:19:18.574 -05:00 [DBG] client found in database: true
2019-05-20 01:19:18.574 -05:00 [DBG] client configuration validation for client client succeeded.
2019-05-20 01:19:18.591 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-20 01:19:18.592 -05:00 [DBG] Client validation success
2019-05-20 01:19:18.621 -05:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLMSTALP5F1H:00000003","TimeStamp":"2019-05-20T06:19:18.0000000Z","ProcessId":16504,"LocalIpAddress":"127.0.0.1:45777","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-20 01:19:18.666 -05:00 [DBG] Start token request validation
2019-05-20 01:19:18.692 -05:00 [DBG] Start resource owner password token request validation
2019-05-20 01:19:18.794 -05:00 [DBG] Found [] identity scopes in database
2019-05-20 01:19:19.234 -05:00 [DBG] Found ["api1"] API scopes in database
2019-05-20 01:19:19.314 -05:00 [DBG] Found [] identity scopes in database
2019-05-20 01:19:19.682 -05:00 [DBG] Found ["api1"] API scopes in database
2019-05-20 01:19:19.690 -05:00 [DBG] IsActive called from: ResourceOwnerValidation
2019-05-20 01:19:19.692 -05:00 [INF] {"Username":"admin","Provider":null,"ProviderUserId":null,"SubjectId":"818727","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLMSTALP5F1H:00000003","TimeStamp":"2019-05-20T06:19:19.0000000Z","ProcessId":16504,"LocalIpAddress":"127.0.0.1:45777","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-20 01:19:19.692 -05:00 [DBG] Resource owner password token request validation success.
2019-05-20 01:19:19.695 -05:00 [INF] Token request validation success
{"ClientId":"client","ClientName":"Client Credentials Client","GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"admin","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"admin","password":"***REDACTED***","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-05-20 01:19:19.726 -05:00 [DBG] Getting claims for access token for client: client
2019-05-20 01:19:19.727 -05:00 [DBG] Getting claims for access token for subject: 818727
2019-05-20 01:19:19.732 -05:00 [DBG] Get profile called for subject 818727 from client Client Credentials Client with claim types [] via ClaimsProviderAccessToken
2019-05-20 01:19:19.733 -05:00 [DBG] Issued claims: []
2019-05-20 01:19:19.826 -05:00 [INF] {"ClientId":"client","ClientName":"Client Credentials Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"818727","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****9AxQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLMSTALP5F1H:00000003","TimeStamp":"2019-05-20T06:19:19.0000000Z","ProcessId":16504,"LocalIpAddress":"127.0.0.1:45777","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-20 01:19:19.828 -05:00 [DBG] Token request success.
2019-05-20 01:19:20.227 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-20 01:19:20.228 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-20 01:19:20.228 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-20 01:19:20.228 -05:00 [DBG] Start discovery request
2019-05-20 01:19:20.736 -05:00 [DBG] Found ["openid","profile","roles","api1"] as all scopes in database
2019-05-20 01:19:21.007 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-05-20 01:19:21.007 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-05-20 01:19:21.007 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-05-20 01:19:21.007 -05:00 [DBG] Start key discovery request
